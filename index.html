<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>My Mobile Code Editor</title>
<style>
body{margin:0;font-family:sans-serif;background:#111;color:#fff}
header{padding:10px;background:#1e1e1e;text-align:center}
button{background:#444;color:#fff;border:none;padding:6px 10px;border-radius:5px;margin:4px 0}
input,textarea{width:100%;background:#222;color:#fff;border:1px solid #333;padding:6px;margin:4px 0}
.folder,.file{padding:6px;border-bottom:1px solid #333}
.menu{float:right;cursor:pointer}
.hidden{display:none}
</style>
</head>
<body>

<header>üìÅ My Code Editor</header>

<div id="home">
  <input id="folderName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå">
  <textarea id="folderDesc" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"></textarea>
  <button onclick="createFolder()">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
  <div id="folders"></div>
</div>

<div id="editor" class="hidden">
  <button onclick="back()">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
  <input id="search" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î">
  <button onclick="findText()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  <textarea id="code" rows="16"></textarea>
  <button onclick="saveFile()">üíæ ‡πÄ‡∏ã‡∏ü‡πÑ‡∏ü‡∏•‡πå</button>
</div>

<div id="viewer" class="hidden">
  <button onclick="back()">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
  <iframe id="frame" style="width:100%;height:80vh;border:none"></iframe>
</div>

<script>
let data = JSON.parse(localStorage.getItem("myEditorData")) || {};
let currentFolder = "";
let currentFile = "";

function saveStorage(){
  localStorage.setItem("myEditorData", JSON.stringify(data));
}

function createFolder(){
  let name = folderName.value;
  if(!name) return;
  data[name]={desc:folderDesc.value,files:{}};
  saveStorage();
  render();
}

function render(){
  folders.innerHTML="";
  for(let f in data){
    let div=document.createElement("div");
    div.className="folder";
    div.innerHTML=`üìÇ ${f} <button onclick="openFolder('${f}')">‡πÄ‡∏õ‡∏¥‡∏î</button>`;
    folders.appendChild(div);
  }
}

function openFolder(f){
  currentFolder=f;
  folders.innerHTML=`<button onclick="addFile()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå</button>`;
  for(let file in data[f].files){
    let div=document.createElement("div");
    div.className="file";
    div.innerHTML=`üìÑ ${file}
    <span class="menu" onclick="fileMenu('${file}')">‚ãÆ</span>`;
    folders.appendChild(div);
  }
}

function addFile(){
  let name=prompt("‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå");
  if(!name) return;
  data[currentFolder].files[name]="";
  saveStorage();
  openFolder(currentFolder);
}

function fileMenu(file){
  let act=prompt("1 = ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå\n2 = ‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î");
  if(act=="1") openFile(file);
  if(act=="2") editFile(file);
}

function editFile(file){
  currentFile=file;
  home.classList.add("hidden");
  editor.classList.remove("hidden");
  code.value=data[currentFolder].files[file];
}

function saveFile(){
  data[currentFolder].files[currentFile]=code.value;
  saveStorage();
  alert("‡πÄ‡∏ã‡∏ü‡πÅ‡∏•‡πâ‡∏ß (‡∏Ñ‡πâ‡∏≤‡∏á‡∏ñ‡∏≤‡∏ß‡∏£)");
}

function openFile(file){
  home.classList.add("hidden");
  viewer.classList.remove("hidden");
  frame.srcdoc=data[currentFolder].files[file];
}

function findText(){
  let t = search.value;
  if(!t){
    alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô");
    return;
  }
  if(code.value.includes(t)){
    alert("‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤");
  }else{
    alert("‡πÑ‡∏°‡πà‡∏û‡∏ö");
  }
}

function back(){
  editor.classList.add("hidden");
  viewer.classList.add("hidden");
  home.classList.remove("hidden");
  render();
}

render();
</script>

</body>
  </html>
